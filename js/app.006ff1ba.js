(function(e){function t(t){for(var a,r,o=t[0],i=t[1],l=t[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(h.length)h.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],a=!0,o=1;o<s.length;o++){var i=s[o];0!==n[i]&&(a=!1)}a&&(c.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},n={app:0},c=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=i;c.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},c=[],r={name:"App"},o=r,i=(s("5c0b"),s("2877")),l=Object(i["a"])(o,n,c,!1,null,null,null),d=l.exports,u=(s("99af"),s("2f62")),h=s("ec26"),p=(s("4de4"),s("c740"),s("a434"),s("b0c0"),"stories"),f="story",m="assetPack",v="assetPackKeys",y=function(e){window.console.log("MyLocalStorage # [STORE] getItem ("+e+")");var t=window.localStorage.getItem(e);return window.console.log("RES: "+t),JSON.parse(t)},g=function(e,t){window.console.log("MyLocalStorage # [STORE] setItem ("+e+")");var s=JSON.stringify(t);window.console.log("RES: "+s),window.localStorage.setItem(e,s)},w=function(e){window.console.log("MyLocalStorage # [STORE] removeItem ("+e+")"),window.localStorage.removeItem(e)},b={loadStoryKeys:function(){window.console.log("MyLocalStorage # [story] loadStoryKeys");var e=y(p);return e||[]},saveStoryKeys:function(e){window.console.log("MyLocalStorage # [story] saveStoryKeys (storyKeys)"),window.console.log(e),g(p,e)},saveStory:function(e){window.console.log("MyLocalStorage # [story] saveStory (story)"),window.console.log(e);var t=this.loadStoryKeys(),s={id:e.id,name:e.title},a=t.findIndex((function(t){return t.id===e.id}));-1===a?(t.push(s),this.saveStoryKeys(t)):t.splice(a,1,s),this.saveStoryKeys(t);var n=f+"."+e.id;g(n,e)},loadStory:function(e){window.console.log("MyLocalStorage # [story] loadStory (storyId)"),window.console.log(e);var t=f+"."+e;return y(t)},loadAssetPack:function(e){window.console.log("MyLocalStorage # [assets] loadAssetPack (id)"),window.console.log(e);var t=m+"."+e;return y(t)},saveAssetPack:function(e){window.console.log("MyLocalStorage # [assets] saveAssetPack (assetPack)"),window.console.log(e);var t=this.loadAssetPackKeys(),s=t.findIndex((function(t){return t.id===e.id}));window.console.log("index is "+s);var a={id:e.id,name:e.name};-1===s?(t.push(a),this.saveAssetPackKeys(t)):t.splice(s,1,a),this.saveAssetPackKeys(t);var n=m+"."+e.id;g(n,e)},loadAssetPackKeys:function(){window.console.log("MyLocalStorage # [assets] loadAssetPackKeys");var e=y(v);return e||[]},saveAssetPackKeys:function(e){window.console.log("MyLocalStorage # [assets] saveAssetPackKeys (assetPackKeys"),window.console.log(e),g(v,e)},deleteAssetPack:function(e){window.console.log("MyLocalStorage # [assets] deleteAssetPack (assetPackId)"),window.console.log(e);var t=this.loadAssetPackKeys();t=t.filter((function(t){return t.id!==e})),this.saveAssetPackKeys(t);var s=m+"."+e;w(s)}};a["a"].use(u["a"]);var k=new u["a"].Store({state:{story:{id:Object(h["a"])(),scenes:[],characters:[],plan:[]},stories:b.loadStoryKeys(),assetPacks:b.loadAssetPackKeys()},getters:{story:function(e){return window.console.log("getting story in store"),window.console.log("story is"),window.console.log(e.story),e.story},stories:function(e){return e.stories},assetPacks:function(){return b.loadAssetPackKeys()},assetPack:function(){return function(e){return b.loadAssetPack(e)}}},mutations:{update:function(e,t){window.console.log("updating story in store"),e.story=t},save:function(e,t){this.state.story=t,b.saveStory(e.story),e.stories=b.loadStoryKeys()},load:function(e,t){e.story=b.loadStory(t)},updateAssetPack:function(e,t){b.saveAssetPack(t)},importAssetsToStory:function(e,t){t.scenes&&(e.story.scenes=e.story.scenes.concat(t.scenes)),t.characters&&(e.story.characters=e.story.characters.concat(t.characters))},deleteAssetPack:function(e,t){b.deleteAssetPack(t)}}}),_=s("8c4f"),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h1",[e._v("Story Maker")]),s("p",[e._v("Loaded Story: "+e._s(e.story.title))]),s("button",{staticClass:"wideMenu button",on:{click:function(t){return e.$router.push("/play")}}},[e._v("Play")]),s("button",{staticClass:"wideMenu button",on:{click:function(t){return e.$router.push("/edit")}}},[e._v("Edit")]),s("hr"),s("UploadFile",{attrs:{labelClass:"wideMenu",text:!0,id:"uploadStory",label:"Import"},model:{value:e.importedStory,callback:function(t){e.importedStory=t},expression:"importedStory"}}),s("button",{staticClass:"wideMenu button",on:{click:e.exportStory}},[e._v("Export")]),s("h2",[e._v("Saved Stories")]),e._l(e.stories,(function(t){return s("button",{key:t.id,staticClass:"wideMenu button",on:{click:function(s){return e.loadStory(t)}}},[e._v("Load "+e._s(t.name))])})),s("h2",[e._v("Asset Packs")]),s("button",{staticClass:"wideMenu button",on:{click:function(t){return e.$router.push("/assets/update/new")}}},[e._v("New")]),e._l(e.assetPacks,(function(t){return s("button",{key:t.id,staticClass:"wideMenu button",on:{click:function(s){return e.$router.push("/assets/view/"+t.id)}}},[e._v(e._s(t.name))])}))],2)},C=[],x=(s("d3b7"),s("ac1f"),s("3ca3"),s("5319"),s("ddb0"),s("2b3d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"upload"},[s("input",{attrs:{id:e.getId,type:"file"},on:{change:function(t){return e.uploadFile(t)}}}),s("label",{class:["button",e.labelClass],attrs:{for:e.getId}},[e._v(e._s(e.label?e.label:"Upload"))])])}),P=[],A={props:["value","text","id","label","labelClass"],data:function(){return{reader:new FileReader}},mounted:function(){this.reader.addEventListener("load",this.whenFileLoaded,!1)},computed:{getId:function(){return this.id?this.id:"file"}},methods:{uploadFile:function(e){window.console.log("upload file clicked");var t=e.target.files[0];this.text?(window.console.log("it's text"),this.reader.readAsText(t)):this.reader.readAsDataURL(t)},whenFileLoaded:function(){window.console.log("file loaded"),this.$emit("input",this.reader.result)}}},$=A,O=Object(i["a"])($,x,P,!1,null,null,null),M=O.exports,T={components:{UploadFile:M},data:function(){return{importedStory:{}}},computed:{story:function(){return window.console.log("getting story"),this.$store.getters.story},stories:function(){return this.$store.getters.stories},assetPacks:function(){return this.$store.getters.assetPacks}},watch:{importedStory:function(e){window.console.log("story imported"),this.$store.commit("update",JSON.parse(e))}},methods:{loadStory:function(e){this.$store.commit("load",e.id)},exportStory:function(){this.download(JSON.stringify(this.story),this.story.title.replace(/\s/g,""),"json")},download:function(e,t,s){var a=new Blob([e],{type:s});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,t);else{var n=document.createElement("a"),c=URL.createObjectURL(a);n.href=c,n.download=t,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(c)}),0)}}}},j=T,I=Object(i["a"])(j,S,C,!1,null,null,null),D=I.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h1",[e._v("Story Maker - Editor")]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:e.save}},[e._v("Save")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/play")}}},[e._v("Play")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/")}}},[e._v("Back")])]),s("span",{staticClass:"field"},[s("label",[e._v("Story title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.story.title,expression:"story.title"}],attrs:{type:"text"},domProps:{value:e.story.title},on:{input:function(t){t.target.composing||e.$set(e.story,"title",t.target.value)}}})]),s("h2",[e._v("Scenes")]),s("p",[e._v(e._s(e.story.scenes?e.story.scenes.length:0)+" scenes")]),s("ul",e._l(e.story.scenes,(function(t,a){return s("li",{key:a},[e._v(e._s(t.name))])})),0),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/edit/scenes")}}},[e._v("Edit Scenes")]),s("h2",[e._v("Characters")]),s("p",[e._v(e._s(e.story.characters?e.story.characters.length:0)+" characters")]),s("ul",e._l(e.story.characters,(function(t,a){return s("li",{key:a},[e._v(e._s(t.name))])})),0),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/edit/characters")}}},[e._v("Edit Characters")]),s("h2",[e._v("Plan")]),s("p",[e._v(e._s(e.story.plan?e.story.plan.length:0)+" steps in plan")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/edit/plan")}}},[e._v("Edit Plan")])])},E=[],K={name:"Editor",data:function(){return{uploadStory:"",story:{}}},mounted:function(){this.story=this.$store.getters.story},methods:{downloadStory:function(){this.download(JSON.stringify(this.story),"my","story")},save:function(){this.$store.commit("save",this.story)}}},L=K,R=Object(i["a"])(L,N,E,!1,null,null,null),U=R.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h2",[e._v("Scenes")]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:e.addScene}},[e._v("New Scene")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/edit")}}},[e._v("Back")])]),s("ul",{staticClass:"editlist box"},e._l(e.scenes,(function(t){return s("li",{key:t.id},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"scene.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.name},on:{input:function(s){s.target.composing||e.$set(t,"name",s.target.value)}}}),s("img",{attrs:{src:t.image}}),s("span",{staticClass:"buttons"},[s("UploadFile",{attrs:{id:"uploadScene"+t.id},model:{value:t.image,callback:function(s){e.$set(t,"image",s)},expression:"scene.image"}}),s("button",{staticClass:"button danger",on:{click:function(s){return e.deleteScene(t)}}},[e._v("Delete")])],1)])})),0)])},B=[],J=(s("c975"),{components:{UploadFile:M},data:function(){return{scenes:[],checkedScenes:[]}},mounted:function(){this.scenes=this.$store.getters.story.scenes},methods:{addScene:function(){this.scenes.push({id:Object(h["a"])(),name:"",image:""})},deleteScene:function(e){this.scenes.splice(this.scenes.indexOf(e),1)}}}),W=J,z=(s("66dc"),Object(i["a"])(W,F,B,!1,null,"37e6d2f1",null)),H=z.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h2",[e._v("Characters")]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:e.addCharacter}},[e._v("New Character")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/edit")}}},[e._v("Back")])]),s("ul",{staticClass:"editlist box"},e._l(e.characters,(function(t){return s("li",{key:t.id},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"character.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.name},on:{input:function(s){s.target.composing||e.$set(t,"name",s.target.value)}}}),s("img",{attrs:{src:t.image}}),s("span",{staticClass:"field"},[s("label",[e._v("Speech Box Colour")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.colour,expression:"character.colour"}],attrs:{type:"color"},domProps:{value:t.colour},on:{input:function(s){s.target.composing||e.$set(t,"colour",s.target.value)}}})]),s("span",{staticClass:"field"},[s("label",[e._v("Y-Offset")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.yoffset,expression:"character.yoffset"}],attrs:{type:"number"},domProps:{value:t.yoffset},on:{input:function(s){s.target.composing||e.$set(t,"yoffset",s.target.value)}}})]),s("span",{staticClass:"field"},[s("label",[e._v("Scale")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"character.scale"}],attrs:{type:"number"},domProps:{value:t.scale},on:{input:function(s){s.target.composing||e.$set(t,"scale",s.target.value)}}})]),s("Canvas",{attrs:{id:"canvas"+t.id,width:304,height:190,character:t,text:"Hi"}}),s("span",{staticClass:"buttons"},[s("UploadFile",{attrs:{id:"uploadCharacter"+t.id},model:{value:t.image,callback:function(s){e.$set(t,"image",s)},expression:"character.image"}}),s("button",{staticClass:"button danger",on:{click:function(s){return e.deleteCharacter(t)}}},[e._v("Delete")])],1)],1)})),0)])},q=[],G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("canvas",{attrs:{id:e.id,width:e.width,height:e.height},on:{click:function(t){return e.$emit("nextStep")}}})},Q=[],V=s("1157"),X=s.n(V),Z=s("acea"),ee=s.n(Z);ee()(X.a,window);var te={props:["id","width","height","scene","character","text"],data:function(){return{characterImageMeta:{width:0,height:0}}},mounted:function(){window.console.log(""),window.console.log(this.id+" mounted"),this.loadMetadata(),this.draw()},watch:{scene:{handler:function(){window.console.log(""),window.console.log(this.id+" scene updated"),this.draw()},deep:!0},character:{handler:function(){window.console.log(""),window.console.log(this.id+" character updated"),this.loadMetadata()},deep:!0},characterImageMeta:{handler:function(){window.console.log(""),window.console.log(this.id+" image meta updated"),this.draw()},deep:!0},text:function(){window.console.log(""),window.console.log(this.id+" text updated"),this.draw()}},computed:{xscale:function(){return this.width/800},yscale:function(){return this.height/500}},methods:{draw:function(){window.console.log(this.id+" draw ******"),window.console.log("scene? "+(!1!==this.scene)),window.console.log("character? "+(!1!==this.character));var e=this.id?X()("#"+this.id):X()("canvas");e.clearCanvas(),this.drawBorder(e),this.drawScene(e),this.drawCharacter(e),this.drawText(e)},drawBorder:function(e){e.drawRect({strokeStyle:"#c33",strokeWidth:1,x:1,y:1,width:this.width-2,height:this.height-2,fromCenter:!1})},drawScene:function(e){this.scene&&this.scene.image&&e.drawImage({source:this.scene.image,x:2,y:2,width:this.width-4,height:this.height-4,scale:1,fromCenter:!1})},drawCharacter:function(e){if(this.character&&this.character.image){var t=200*this.yscale+(this.character.yoffset?5*parseInt(this.character.yoffset):0),s=this.character.scale?parseFloat(this.character.scale):1;window.console.log("width: "+this.characterImageMeta.width*this.xscale),window.console.log("height: "+this.characterImageMeta.height*this.yscale),e.drawImage({source:this.character.image,x:10*this.xscale,y:t,width:this.characterImageMeta.width*this.xscale*s,height:this.characterImageMeta.height*this.yscale*s,fromCenter:!1})}},drawText:function(e){var t=this.character.colour?this.character.colour:"#69A0D7",s="#2D4258",a="#ECF3FA";e.drawRect({fillStyle:t,x:20*this.xscale,y:20*this.yscale,width:770*this.xscale,height:80*this.yscale,fromCenter:!1,cornerRadius:4}),e.drawRect({strokeStyle:s,x:24*this.xscale,y:24*this.yscale,width:762*this.xscale,height:72*this.yscale,fromCenter:!1,cornerRadius:2}),e.drawText({name:"drawText",fillStyle:a,strokeWidth:1,x:34*this.xscale,y:34*this.yscale,fontSize:18*this.xscale+"pt",fromCenter:!1,text:'"'+this.text+'"'}),e.drawText({name:"drawText",fillStyle:a,strokeWidth:1,x:45*this.xscale,y:74*this.yscale,fontSize:18*this.xscale+"pt",text:"..."})},loadMetadata:function(){var e=this,t=new Image;t.onload=function(){window.console.log("loaded metadata"),e.characterImageMeta.width=t.width,e.characterImageMeta.height=t.height,e.draw()},t.src=this.character.image}}},se=te,ae=Object(i["a"])(se,G,Q,!1,null,null,null),ne=ae.exports,ce={components:{UploadFile:M,Canvas:ne},data:function(){return{characters:[]}},mounted:function(){this.characters=this.$store.getters.story.characters},methods:{addCharacter:function(){this.characters.push({id:Object(h["a"])(),name:"",image:"",colour:"#69A0D7",yoffset:0,scale:1})},deleteCharacter:function(e){this.characters.splice(this.characters.indexOf(e),1)}}},re=ce,oe=(s("83d7"),Object(i["a"])(re,Y,q,!1,null,"7ad5c17b",null)),ie=oe.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h2",[e._v("Plan")]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:e.newItem}},[e._v("New")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/edit")}}},[e._v("Back")])]),s("ul",{staticClass:"editlist"},e._l(e.plan,(function(t,a){return s("li",{key:a},[s("span",{staticClass:"number"},[e._v(e._s(a+1))]),s("span",{staticClass:"content"},[void 0!==t.scene?s("span",{staticClass:"field"},[s("label",[e._v("Scene: ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.scene,expression:"item.scene"}],on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"scene",s.target.multiple?a:a[0])}}},e._l(e.scenes,(function(t,a){return s("option",{key:a},[e._v(e._s(t.name))])})),0)]):s("button",{staticClass:"button small",on:{click:function(s){return e.changeScene(t)}}},[e._v("Change scene")]),void 0!==t.character?s("span",{staticClass:"field"},[s("label",[e._v("Character: ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.character,expression:"item.character"}],on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"character",s.target.multiple?a:a[0])}}},e._l(e.characters,(function(t,a){return s("option",{key:a},[e._v(e._s(t.name))])})),0)]):s("button",{staticClass:"button small",on:{click:function(s){return e.changeCharacter(t)}}},[e._v("Change character")]),s("span",{staticClass:"field"},[s("label",[e._v("Message: ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"item.text"}],domProps:{value:t.text},on:{input:function(s){s.target.composing||e.$set(t,"text",s.target.value)}}})])])])})),0)])},de=[],ue={data:function(){return{plan:[],scenes:[],characters:[]}},mounted:function(){this.plan=this.$store.getters.story.plan,this.scenes=this.$store.getters.story.scenes,this.characters=this.$store.getters.story.characters},methods:{newItem:function(){this.plan.push({scene:void 0,character:void 0,text:""})},changeScene:function(e){e.scene=""},changeCharacter:function(e){e.character=""}}},he=ue,pe=Object(i["a"])(he,le,de,!1,null,null,null),fe=pe.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h1",[e._v(e._s(e.story.title))]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/")}}},[e._v("Stop")])]),s("Canvas",{attrs:{id:"canvas1",width:800,height:500,scene:this.scene,character:this.character,text:e.text},on:{nextStep:e.nextStep}})],1)},ve=[];s("7db0");ee()(X.a,window);var ye={name:"Play",components:{Canvas:ne},data:function(){return{story:{},scene:{},character:{},characterImageMeta:{width:0,height:0},text:"",index:0}},mounted:function(){this.story=this.$store.getters.story,this.update()},methods:{update:function(){var e=this.story.plan[this.index];e.scene&&(this.scene=this.story.scenes.find((function(t){return t.name===e.scene}))),e.character&&(this.character=this.story.characters.find((function(t){return t.name===e.character}))),e.text&&(this.text=e.text),this.loadMetadataAndDraw()},nextStep:function(){this.index++,this.index>=this.story.plan.length?this.$router.push("/"):this.update()},loadMetadataAndDraw:function(){var e=this,t=new Image;t.onload=function(){e.characterImageMeta.width=t.width,e.characterImageMeta.height=t.height},t.src=this.character.image}}},ge=ye,we=Object(i["a"])(ge,me,ve,!1,null,null,null),be=we.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h1",[e._v("Update Assets")]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:e.save}},[e._v("Save")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/")}}},[e._v("Back")])]),s("h2",[e._v("Asset pack")]),s("span",{staticClass:"field"},[s("label",[e._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.assetPack.name,expression:"assetPack.name"}],attrs:{type:"text"},domProps:{value:e.assetPack.name},on:{input:function(t){t.target.composing||e.$set(e.assetPack,"name",t.target.value)}}})]),s("hr"),s("h2",[e._v("Current assets")]),s("button",{staticClass:"button danger",on:{click:e.removeAssets}},[e._v("Remove")]),s("h3",[e._v("Scenes")]),s("ul",e._l(e.assetPack.scenes,(function(t,a){return s("li",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedScenesToDelete,expression:"selectedScenesToDelete"}],attrs:{type:"checkbox",id:"scene"+a},domProps:{value:t.name,checked:Array.isArray(e.selectedScenesToDelete)?e._i(e.selectedScenesToDelete,t.name)>-1:e.selectedScenesToDelete},on:{change:function(s){var a=e.selectedScenesToDelete,n=s.target,c=!!n.checked;if(Array.isArray(a)){var r=t.name,o=e._i(a,r);n.checked?o<0&&(e.selectedScenesToDelete=a.concat([r])):o>-1&&(e.selectedScenesToDelete=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedScenesToDelete=c}}}),s("label",{attrs:{for:"scene"+a}},[e._v(e._s(t.name))])])})),0),s("h3",[e._v("Characters")]),s("ul",e._l(e.assetPack.characters,(function(t,a){return s("li",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCharactersToDelete,expression:"selectedCharactersToDelete"}],attrs:{type:"checkbox",id:"character"+a},domProps:{value:t.name,checked:Array.isArray(e.selectedCharactersToDelete)?e._i(e.selectedCharactersToDelete,t.name)>-1:e.selectedCharactersToDelete},on:{change:function(s){var a=e.selectedCharactersToDelete,n=s.target,c=!!n.checked;if(Array.isArray(a)){var r=t.name,o=e._i(a,r);n.checked?o<0&&(e.selectedCharactersToDelete=a.concat([r])):o>-1&&(e.selectedCharactersToDelete=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedCharactersToDelete=c}}}),s("label",{attrs:{for:"character"+a}},[e._v(e._s(t.name))])])})),0),s("hr"),s("h2",[e._v("Add from existing project")]),s("button",{staticClass:"button",on:{click:e.addUpdateAssetPack}},[e._v("Add")]),s("h3",[e._v("Scenes")]),s("ul",e._l(e.story.scenes,(function(t,a){return s("li",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedScenes,expression:"selectedScenes"}],attrs:{type:"checkbox",id:"scene"+a},domProps:{value:t.name,checked:Array.isArray(e.selectedScenes)?e._i(e.selectedScenes,t.name)>-1:e.selectedScenes},on:{change:function(s){var a=e.selectedScenes,n=s.target,c=!!n.checked;if(Array.isArray(a)){var r=t.name,o=e._i(a,r);n.checked?o<0&&(e.selectedScenes=a.concat([r])):o>-1&&(e.selectedScenes=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedScenes=c}}}),s("label",{attrs:{for:"scene"+a}},[e._v(e._s(t.name))])])})),0),s("h3",[e._v("Characters")]),s("ul",e._l(e.story.characters,(function(t,a){return s("li",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCharacters,expression:"selectedCharacters"}],attrs:{type:"checkbox",id:"character"+a},domProps:{value:t.name,checked:Array.isArray(e.selectedCharacters)?e._i(e.selectedCharacters,t.name)>-1:e.selectedCharacters},on:{change:function(s){var a=e.selectedCharacters,n=s.target,c=!!n.checked;if(Array.isArray(a)){var r=t.name,o=e._i(a,r);n.checked?o<0&&(e.selectedCharacters=a.concat([r])):o>-1&&(e.selectedCharacters=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedCharacters=c}}}),s("label",{attrs:{for:"character"+a}},[e._v(e._s(t.name))])])})),0)])},_e=[],Se=(s("b64b"),s("b85c")),Ce={data:function(){return{assetPack:{id:Object(h["a"])(),scenes:[],characters:[]},story:{},selectedScenesToDelete:[],selectedCharactersToDelete:[],selectedScenes:[],selectedCharacters:[]}},mounted:function(){var e=this.$route.params.assetId;"new"!==e&&(this.assetPack=this.$store.getters.assetPack(e)),this.story=this.$store.getters.story},computed:{hasAssetPack:function(){return Object.keys(this.assetPack).length>0}},methods:{createNew:function(){this.assetPack={name:""}},addUpdateAssetPack:function(){var e,t=Object(Se["a"])(this.selectedScenes);try{for(t.s();!(e=t.n()).done;){var s=e.value;this.assetPack.scenes.push(this.story.scenes.find((function(e){return e.name===s})))}}catch(r){t.e(r)}finally{t.f()}var a,n=Object(Se["a"])(this.selectedCharacters);try{for(n.s();!(a=n.n()).done;){var c=a.value;this.assetPack.characters.push(this.story.characters.find((function(e){return e.name===c})))}}catch(r){n.e(r)}finally{n.f()}},save:function(){this.$store.commit("updateAssetPack",this.assetPack),this.$router.push("/assets/view/"+this.assetPack.id)},removeAssets:function(){var e,t=Object(Se["a"])(this.selectedScenesToDelete);try{for(t.s();!(e=t.n()).done;){var s=e.value;this.assetPack.scenes.splice(this.assetPack.scenes.indexOf(s),1)}}catch(r){t.e(r)}finally{t.f()}var a,n=Object(Se["a"])(this.selectedCharactersToDelete);try{for(n.s();!(a=n.n()).done;){var c=a.value;this.assetPack.characters.splice(this.assetPack.characters.indexOf(c),1)}}catch(r){n.e(r)}finally{n.f()}}}},xe=Ce,Pe=Object(i["a"])(xe,ke,_e,!1,null,null,null),Ae=Pe.exports,$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("h1",[e._v(e._s(e.assetPack.name))]),s("span",{staticClass:"buttons"},[s("button",{staticClass:"button",on:{click:e.importToProject}},[e._v("Import to Project")]),s("button",{staticClass:"button",on:{click:e.edit}},[e._v("Edit")]),s("button",{staticClass:"button danger",on:{click:e.deletePack}},[e._v("Delete")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/")}}},[e._v("Back")])]),s("h3",[e._v("Scenes")]),s("ul",e._l(e.assetPack.scenes,(function(t,a){return s("li",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedScenes,expression:"selectedScenes"}],attrs:{type:"checkbox",id:"scene"+a},domProps:{value:t.name,checked:Array.isArray(e.selectedScenes)?e._i(e.selectedScenes,t.name)>-1:e.selectedScenes},on:{change:function(s){var a=e.selectedScenes,n=s.target,c=!!n.checked;if(Array.isArray(a)){var r=t.name,o=e._i(a,r);n.checked?o<0&&(e.selectedScenes=a.concat([r])):o>-1&&(e.selectedScenes=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedScenes=c}}}),s("label",{attrs:{for:"scene"+a}},[e._v(e._s(t.name))])])})),0),s("h3",[e._v("Characters")]),s("ul",e._l(e.assetPack.characters,(function(t,a){return s("li",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCharacters,expression:"selectedCharacters"}],attrs:{type:"checkbox",id:"character"+a},domProps:{value:t.name,checked:Array.isArray(e.selectedCharacters)?e._i(e.selectedCharacters,t.name)>-1:e.selectedCharacters},on:{change:function(s){var a=e.selectedCharacters,n=s.target,c=!!n.checked;if(Array.isArray(a)){var r=t.name,o=e._i(a,r);n.checked?o<0&&(e.selectedCharacters=a.concat([r])):o>-1&&(e.selectedCharacters=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedCharacters=c}}}),s("label",{attrs:{for:"character"+a}},[e._v(e._s(t.name))])])})),0)])},Oe=[],Me={data:function(){return{assetPack:{},selectedScenes:[],selectedCharacters:[]}},mounted:function(){var e=this.$route.params.assetId;window.console.log(e),this.assetPack=this.$store.getters.assetPack(e)},methods:{importToProject:function(){var e,t={scenes:[],characters:[]},s=Object(Se["a"])(this.selectedScenes);try{for(s.s();!(e=s.n()).done;){var a=e.value;t.scenes.push(this.assetPack.scenes.find((function(e){return e.name===a})))}}catch(o){s.e(o)}finally{s.f()}var n,c=Object(Se["a"])(this.selectedCharacters);try{for(c.s();!(n=c.n()).done;){var r=n.value;t.characters.push(this.assetPack.characters.find((function(e){return e.name===r})))}}catch(o){c.e(o)}finally{c.f()}window.console.log("updating"),window.console.log(t),this.$store.commit("importAssetsToStory",t),this.$router.push("/edit")},edit:function(){this.$router.push("/assets/update/"+this.assetPack.id)},deletePack:function(){this.$store.commit("deleteAssetPack",this.assetPack.id),this.$router.push("/")}}},Te=Me,je=Object(i["a"])(Te,$e,Oe,!1,null,null,null),Ie=je.exports,De=[{path:"/",component:D},{path:"/edit",component:U},{path:"/edit/scenes",component:H},{path:"/edit/characters",component:ie},{path:"/edit/plan",component:fe},{path:"/play",component:be},{path:"/assets/update/:assetId",component:Ae},{path:"/assets/view/:assetId",component:Ie}],Ne=new _["a"]({mode:"hash",routes:De});a["a"].use(_["a"]);var Ee=Ne;a["a"].config.productionTip=!1,new a["a"]({store:k,router:Ee,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},"66dc":function(e,t,s){"use strict";var a=s("dc2a"),n=s.n(a);n.a},"83d7":function(e,t,s){"use strict";var a=s("acb9"),n=s.n(a);n.a},"9c0c":function(e,t,s){},acb9:function(e,t,s){},dc2a:function(e,t,s){}});
//# sourceMappingURL=app.006ff1ba.js.map